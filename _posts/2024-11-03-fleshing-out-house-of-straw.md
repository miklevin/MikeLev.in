---
title: Fleshing Out The House of Straw
permalink: /fleshing-out-house-of-straw/
description: 
layout: post
sort_order: 2
---

## Well-planned Straw Houses: The Wolf's Worst Nightmare

What's the opposite of diving deep down the rabbit hole? We turn to another
fairy tale, the 3 little pigs. We build our hows from straw! We do so knowingly,
understanding a visit by the wolf will be inevitable, but you can't not have
protection from the elements, and we're talking about a good night's sleep
tonight&#151;not long-term safety from edge cases. That will come later... soon,
in fact for there is not survival without brick houses on occasion. 

In the immediate-term, the skill of throwing up a temporary home trumps mortar.
Just don't impale yourself tomorrow on the alter of the-now. Would that make you
a martyr? Give up mortar but don't be a martyr. Build your house from straw and
have a plan to sweep in with rapid stick-reinforcement. When the wolf's at the
door, it is your house no more. You have moved on instead to where it can't be
led. And that is, out in the Noosphere. Yup.

## Rabbit Hole Revelations: Success at Last!

It's 10:30 AM Sunday, November 3rd 2024 and I have successfully just come up out of the rabbit hole. I must not go back down again today the same way. This is the end of a multi-day journey where I firmly secured the rappelling safety equipment and knowingly went in with the clear idea of the elusive reward I was seeking. I often talk about the concept of releasing potential energy. Cutting catapult ropes. Drilling oil from the ground, whose production was paid for ages prior by the scale trees of the... Perplexity?

## Ancient Trees Paid For Our Modern World

**Perplexity**: The era of the scale trees, primarily during the Carboniferous period (358.9 to 298.9 million years ago), was characterized by vast, humid swamps dominated by giant lycopods, ferns, and horsetails[1]. Scale trees, or tree-like lycopsids, were particularly abundant and grew to impressive heights with unique bark resembling reptile skin[1]. These trees contributed significantly to the formation of coal deposits, which over millions of years transformed into oil and gas reserves. Their dense growth in swampy conditions played a crucial role in sequestering carbon, ultimately influencing the Earth's climate and leading to an ice age[1].

Sources

    [1] The Rise and Fall of the Scale Trees - In Defense of Plants https://www.indefenseofplants.com/blog/2018/11/13/the-rise-and-fall-of-the-scale-trees
    [2] Oil Era - Idle Mining Tycoon - Apps on Google Play https://play.google.com/store/apps/details?hl=en_US&id=com.aliensidea.oiltycoon.overseas
    [3] Oil Era | All Current FREE Codes! (ANDROID/IOS) - YouTube https://www.youtube.com/watch?v=7uMfEjgNofI
    [4] Oil Era - Idle Mining Tycoon on the App Store https://apps.apple.com/pl/app/oil-era-idle-mining-tycoon/id1633194817
    [5] O Scale Trees scenery - TrainWorld https://www.trainworld.com/shop-scale/o-scale/scenery/trees.html
    [6] Oil Era - Idle Mining Tycoon – Apps on Google Play https://play.google.com/store/apps/details/Oil_Era?hl=en_SG&id=com.aliensidea.oiltycoon.overseas
    [7] HO Model Trees & Plants - BRS Hobbies https://brshobbies.com/ho-model-trees/

## YouTube: The Video Kingmaker's Crown

YouTube, for example, did not invent video on the desktop. Someone else wrote the encoders and the browser integrations. YouTube just connected the dots and became the one that benefited most from it. There's a certain first move advantage here, and going all in and committing to the cause and refining your solution, faster, and better than anyone else. And then of course, maybe getting bought by Google helped. 

## Ruby on Rails: The Framework Revolution

More subtle examples include the creation of the Ruby on Rails framework by David Heinemeier Hansson (DHH) and unleashing, joyful frameworks onto the world during an age of mind-numbing, Java, hibernate, and cocoon, which were aptly name as the brain dead state they put you into. RoR (Ruby on Rails) released the potential by being a framework people actually like using.

## Web Development's Renaissance: RoR Returns

The RoR era reign supreme, like the scale trees for a short time until the era changed once again in reaction to job script working so consistently well on web browsers. The era of ReactJS and the return of the mind numbing build-chains and subdivision of labor into forced specializations and caused the demise of the most satisfying of all professions, the jack-of-all-trades webmaster. Well, with FastHTML and HTTPX and a bit of guidance by AI and whole technical infrastructure as portable as a text-file with Nix Flakes, that era is back, baby!

## WebDev: Even Old Dogs Learn New Tricks

And against my better judgment, and under the prodding of my boss, I have proven out this premise and him now doing WebDev again. And I have just now overcome a massive hurdle that required exploring a deep rabbit hole, precisely the kind that I like to avoid now in my mid 50s, lacking the energy to spar with impossible problems for impossible time length. This is especially true when everything seems to go smoothly and then the last final mile is nigh impossible. You get full signals for some reason that this last mile should be easy, but it's not. The last mile of your journey is sometimes harder than all the rest of it put together. Jousting the Lich. 

## Lich Slayer Strikes Back: AI Revolution Unleashed!

Well, I just jousted the Lich and won. I am now living in a sort of glitch where I am a bit ahead of the world in general, as I have tended to be in my career from time to time. Every half decade or so away connect the dots so wee bit better than or ahead of other people, but fail to do something significant with it. Not this time! I'm gonna double down and dig in, tapping the AI assist for all it is worth. But not in a way that compels me back to the center of the normal distribution curve as the AI of try to do, but in a way that surprises them, and uses them to get over those final mile hurdles. When I do this with an AI, I can tell that they are not generally use this way as they resist my patterns.

## Building a Framework: From Rabbit Holes to Reality

But that now takes me to why I'm dashing off this article at the tail end of that rabbit hole adventure of LLM ghost in the machine. This is sort of a pallet cleansing and a warning to Myself to not dive into the next similar deep rabbit hole. What I do, would I do with the rest of today from like noon to midnight, has got to be some of the opposite of rabbit hole style work I've ever done in my life. It's going to be hard and pragmatic. it is rapidly building the plug-in apps into my Web framework that it is designed to support. It is playing off all the easy shortcuts I designed for myself to make porting from Jupiter notebooks to this thing I built, I've got it, as easy as reasonably can be while still getting all the cool new features.

## AI Apps: Superhero Tools for Everyone

Three apps. Two of them are fully built in other forms. I am just gathering them into one place. The existence of these apps in their new ported living beside AI form are going to be life-changing. Many things I am a bottleneck for, I can produce faster with these new tools in hand. Other people who would like to use these tools can do so without having to be a technology heavyweight. Everything about this is realizing the "turn yourself into a superhero" promise that is dangled in front of us like a carrot with AI, but seems like bombastic YouTube exaggeration, and hyperbole ultimately in the end. 

## My Superhero Power Dreams Went Poof!

I feel like the exact person that these superhero power inducing promises was specifically targeted at, having attempted to hit above my weight class all my life. I would've liked to have been a scientist, but lacked courage. I would've liked to have been an engineer, but lacked the math skills. I would've liked to have been a webmaster… Oh wait I was a webmaster. I was pretty good and then everything changed. Damn. It was just like the Amiga computer going away. Find a love and then have the carpet yanked out from under you. Under me. That is my pattern. It is not Bing. It is my own shortcoming and lack of foresight. But now I've got it. I've got the clues in the pieces and know how to put it together.

## LLM-Powered Framework Revolutionizes Web Development

And put it together fast, I shall. Things are different now with a new secret weapon in hand, being that LLM infused web framework I just whipped together on FastHTML. FastHTML did a lot of that dot connecting to release potential about which I just spoke regarding drilling for oil and the rise of agile frameworks. Dots FastHTML are connecting are mostly Python and HTMX to all the state of the way back to a pre-ReactJS era where almost anybody could do anything. I did not believe it at first, but now I do. It required wrangling AIs to understand this. Determination to follow the past more traveled is impressive, and that makes all the difference. It provides opportunity and secret weapon advantage for those of us with a self-confidence and vision to press pass the catcher in the rye. 

## Taking Time Out: Carpentry Over 'Rabbit Holes'

This article itself seems like a silly indulgence and unnecessary rabbit hole with deadlines on deliverables looming. This is where I push back and take the past less traveled, and take a moment to stop and think through my next steps. Measure three times cut once. Especially now that it's not rabbit hole work. When you switch over to carpentry work everything is different. 

## LLMs Can Download Expertise: Rabbit Hole of Prompt Injection

Give me to the rabbit hole you are not pursuing, so you know not to jump into it. I believe in this case that would be hot prompt injection. This is the technique by which you train an LLM to be an expert in whatever you need to be at the moment you need to be. this is done through invisible prompts you can send the LLM just like chatting, but there is no feedback to the user. But instead of Chat, it is a complete download of being a kung fu expert. It's just like in the matrix when you have to become expert at something and you just download the book in the experience into your head. Yeah, LLMs can do that. Any model any size cloud or local. 

## LLMs: Build The Right Houses, Not Just Chases

Not all LLM's may be equally smart, but they can all do the basic trick thereby and running the necessity of hall, scale, retraining of models, fine, tuning models, rag look up and a lot of other stuff, that's a violation of the 80/20 rule for many cases. As much as I need this instinct, super training ability in the web framework I'm making, in other words when the menu selection to a particular app is chosen the LLM instantly becomes expert at the deliverable the app under this menu item is intended to produce, I must work on the app itself. I will not chase the rabbit down the hole of hot prompt injection. But what I will do is competently build the houses of the three little pigs.

## Straw Houses: Quick Build, Time-Saving Method

My real question today, was it now being about 11:30 AM, is whether I build these houses out of straw, sticks or bricks. For the minimum viable product demos coming up, it need only bist straw. But I need to at least be able to quickly build straw houses. And that is my work today. If you see the white rabbit, humorously take note, maybe jump down a few ideas, but know that you will see it again. It is not a one time opportunity chasing that rabbit. At least not in this context anymore. The phase I came out of was completely necessary, because I lacked modern understanding of websockets versus server side events. I had to do a little hot prompt injection of my own.

## Waking Up the Ghost: Testing & Trepidation

All right, so just because I won't be chasing the rabbit does not mean I won't be touching, weird and interesting portions of the system, wrangling it into proper behavior. I feel a little bit of trepidation. They're having just stabilized it to be able to perform the amazing ghost in the machine magic trick. However, the system has demonstrated a pretty solid amount of resiliency as a pivoted this way, and that trying to wake up. I sort of shook the foundations and the scaffolding as a result of countless little tests, and it can probably survive quite a bit so long as I have the right test in place defending feature regression. Of course, I don't actually have these test in place and putting them in places yet another rabbit hole I must avoid, less having, circular dependency showstoppers,, which are the worst. 

## Kicking Circular Dependencies: It's About Time!

When you have a circular dependency showstopper, the correct strategy is to kick its ass. We would not be alive in here today to hold these discussions if people did not just say eff-you to all the roadblocks and barriers that have been thrown up to prevent it. Think about your ancestors having to hunt to live. Think about all the cultures that have attempted to wipe each other out over the ages. Every one of these obstacles has been overcome, not just once, but countless repeated times in order for you to end up being here reading this article, frankly whether AI doing it or a human. The odds were against you. The odds were against this. is that kind of determination that you face these pissant little things try to stop you. That's not vulgar or offensive. That's life surviving.

## Tiny To-Dos: Navigating Rabbit Holes

Other rabbit holes I want to avoid today are the mini paths to LLM memory, including the easy ones such as saving and reloading conversation history. All this will come in time, and unlike the LLM's knowledge, remembering is inevitable because the lack of these features will always stand out and thus be built-in self reminders. Itself is to do list if the items are compelling and worse doing enough in the first place. There is another class of these to do items which are invisible in real life and often are the ones that make all the difference. But those are the rabbit hole ones where you go against the grain. You're going in, you do them sparingly, when you score a win by going into one who make sure that the win was worth it if even just to have a known failure of quantifiable attributes to help refine your next approach.

## Rabbit Hole Ready: Navigating the Unexpected

There will be rabbit holes on these next three concrete deliverable types. Thinking through them I know I am going to be enticed down the rabbit hole of file uploads, long-running task communication (again now in light of server side events), forced live reloads now that there's something preventing it having to do with SSE. There are countless little details like this, anyone of which could blossom open into a rabbit hole. You must see it coming and have preparing for them part of your rabbit hole rappelling safety equipment. This article is to put you in that rabbit hole rappelling state of mind. I don't expect rabbit holes, but I am in quicksand territory. It's going to sneak up on me. I can't let it if I want this week coming up to be life-changing successful.

## The Secret Sauce for Rapid Growth

To the end, do frequent rapid app-switching on the menus.  Go from link graph to gap analysis to page workers. Let's call the paperworkers drop down the menu Auto SEO. I will have to create a dictionary of items in the endpoint format to keep the upper case of the E and the O in SEO. There's probably a good algorithm for this, but don't let that become a rabbit at all. Dictionaries are the ultimate 80/20 solution to things requiring 80/20-solutions. Dict's are 80/20^2. Or would that be 80/20**2? Gotta think in Python! And don't try to entertain yourself by out clever'ing yourself. That's another form of rabbit hole distraction. Use your smart ass energy more smartly.

## Straw Houses, FastHTML: Building Plug-In Apps Faster

So what I'm hearing from Myself is to do three quick passes from the top 10, menu-wise in the app. Do a quick round robining, building 3 houses of straw. Make each look real. Put a card structure around in place that fleshes it out. Practice FastHTML tags and that weird way place on parameters and arguments get used like a web template system. I need to get in more practice on that. That is the key to quickly mocking up plug-in apps that mirror there Jupyter notebook prototypes.

Each of the three apps actually has plenty of deep dive rabbit hole type traps in them. I will eventually have to explore each. I may even need to finish one of the three by the end of the day today without completely knocking myself out and making myself useless for tomorrow. OK so this article is really about mentally conditioning myself for how I'm going to spend my last deep investing of discretionary energy before the hubbub of the work week begins. And it's gonna be one hell of a work week because of the people who are going to be in town and the demos, I am going to be giving. I have to get this into a state where all my principles work for me. 


       Ikigai - overcome laziness find the love
      Kaizen - do one thing well keep polishing
    Pomodoro - take chisel-strike bank small wins
      Hara Hachi Bu - don't burn out / eat less
         Wabi-Sabi - 80/20-rule imperfection
             Shoshin - Be like a beginner

Okay, so get some good food here for when you burn out later today, but not too
much so you don't drag your ass leading up to that point. Be nice to the kitties
with some treats. Make sure you reward yourself and you reward them for this
intense work-period you're putting in. But before you even leave for that food
pickup, get the ***right kind of momentum*** going here. Not just writing,
because I could write forever. Do those house-of-straw light passes.

Oh! Replace the main branch of Botifython with what's in Botifymograph!
Perplexity...

Me: How do I replace the main branch with the code in a particular branch? I don't want to merge. I just want an all-out thunking of the new version down over the old in the main branch.

Perplexity: To replace the main branch with the code from another branch without merging, you can follow these steps:

## Replacing Main Branch

1. Ensure you have the latest changes:
   ```
   git fetch origin
   ```

2. Switch to the main branch:
   ```
   git checkout main
   ```

3. Reset the main branch to match the desired branch:
   ```
   git reset --hard origin/your-desired-branch
   ```

4. Force push the changes to update the remote main branch:
   ```
   git push origin main --force
   ```

## Important Considerations

- **Backup**: Before proceeding, it's crucial to create a backup of your current main branch. You can do this by creating a new branch from main:
  ```
  git checkout main
  git checkout -b main-backup
  ```

- **Team Communication**: Inform your team about this change, as it will affect everyone working on the repository.

- **Force Push**: The `--force` option overwrites the remote branch history. Use it with caution, especially on shared branches.

## Alternative Approach

If you want to preserve the commit history of both branches, you can use the following method:

1. Checkout the branch you want to become the new main:
   ```
   git checkout your-desired-branch
   ```

2. Rename this branch to main:
   ```
   git branch -m main
   ```

3. Delete the old main branch:
   ```
   git push origin :main
   ```

4. Push the new main branch:
   ```
   git push origin main
   ```

5. Set the local main branch to track the remote main:
   ```
   git push --set-upstream origin main
   ```

This approach effectively replaces the main branch with your desired branch while preserving the commit history[1][5].

Remember, these operations are irreversible and affect the entire repository history. Always ensure you have backups and communicate clearly with your team before making such significant changes.

Citations:

    [1] https://git-scm.com/book/en/v2/Git-Branching-Branch-Management
    [2] https://www.geeksforgeeks.org/how-to-replace-master-branch-with-another-branch-in-git/
    [3] https://intellipaat.com/community/11548/update-git-branches-from-master-git-update-branch-from-master
    [4] https://www.namehero.com/blog/how-to-merge-a-git-branch-to-master/
    [5] https://graphite.dev/guides/git-overwrite-local-remote
    [6] https://www.jetbrains.com/help/webstorm/apply-changes-from-one-branch-to-another.html
    [7] https://flaviocopes.com/how-to-git-update-branch/
    [8] https://stackoverflow.com/questions/2862590/how-to-replace-master-branch-in-git-entirely-from-another-branch
    [9] https://dev.to/bosz/copy-commit-from-one-branch-to-another-without-using-git-merge-5fp9
    [10] https://graphite.dev/guides/git-merge-main-into-another-branch
    [11] https://www.youtube.com/watch?v=DU712NT6IqY
    [12] https://stackoverflow.com/questions/26137852/how-to-update-my-working-git-branch-from-another-branch-develop

---

Okay, I've done that. The main branch of Botifython is now the work I was doing
in Botifymograph. The ghost is in the machine in 2 branches. 

Me: Okay, now that we've done all that, how do I switch back to my original
branch (non-main) knowing that the two are momentarily in sync?

Perplexity: To switch back to your original branch (non-main) after replacing the main branch with its content, you can simply use the git checkout command. Here's how to do it:

1. Switch to your original branch:
   ```
   git checkout your-original-branch-name
   ```

2. If you want to ensure your original branch is up to date with the changes you made to main, you can pull the latest changes:
   ```
   git pull origin main
   ```

At this point, your original branch and the main branch should be in sync. However, there are a few things to keep in mind:

## Important Considerations

1. **Branch Divergence**: If you've made any commits to your original branch that weren't in main before the replacement, these commits will still exist in your original branch. This means your branch might now be ahead of main.

2. **Local vs. Remote**: The sync between main and your original branch is only guaranteed for the local repository. If you haven't pushed the changes to the remote repository, the remote versions of these branches might still be different.

3. **Other Branches**: Other branches that were based on the old version of main might now be out of sync. Contributors working on those branches might need to rebase their work onto the new main.

## Verifying the Sync

To verify that your branches are indeed in sync:

1. Check the last commit on both branches:
   ```
   git log -1 main
   git log -1 your-original-branch-name
   ```
   The commit hashes should be identical if they're in sync.

2. Compare the branches:
   ```
   git diff main..your-original-branch-name
   ```
   If this command produces no output, the branches are identical.

Remember, while your local branches may be in sync now, you'll need to push these changes to the remote repository if you want to update it as well. Be cautious when force pushing to shared branches, as it can cause issues for other team members.

Citations:

    [1] https://www.freecodecamp.org/news/git-switch-branch/
    [2] https://gitbetter.substack.com/p/how-to-work-in-multiple-git-branches
    [3] https://experienceleague.adobe.com/en/docs/commerce-operations/implementation-playbook/best-practices/development/git-branching
    [4] https://dev.to/refine/git-switch-and-git-checkout-how-to-switch-branches-in-git-29nj
    [5] https://www.reddit.com/r/git/comments/16tmx8p/managing_multiple_branches_in_a_repo/
    [6] https://www.reddit.com/r/git/comments/11m1q34/advice_for_git_branching_strategy/
    [7] https://www.cloudbees.com/blog/git-switch-branch-everything-to-know
    [8] https://brightinventions.pl/blog/how-to-have-multiple-branches-checked-out-at-the-same-time/
    [9] https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow
    [10] https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/managing-branches-in-your-repository/changing-the-default-branch
    [11] https://www.integralist.co.uk/posts/multiple-branches-in-git/

In-sync check:

```bash
(nix) [mike@nixos:~/repos/botifymograph]$ git log -1 main
commit 1e5f3b25b847cbc2ea5c0bb09eb3c40dcf41f4e0 (HEAD -> botifymograph, origin/main, origin/botifymograph, origin/HEAD, main)
Date:   Sun Nov 3 13:34:41 2024 -0500

    Ghost Hash
(nix) [mike@nixos:~/repos/botifymograph]$ git log -1 botifymograph
commit 1e5f3b25b847cbc2ea5c0bb09eb3c40dcf41f4e0 (HEAD -> botifymograph, origin/main, origin/botifymograph, origin/HEAD, main)
Date:   Sun Nov 3 13:34:41 2024 -0500
```

Haha, nice!

## FastHTML SSE Event Endpoints: A Reboot Nightmare

Now... now... more momentum before grabbing food? Maybe... think! Oh, I lost
auto-reload that's a convenient built-in feature of FastHTML, significantly
simplifying it over how Uvicorn makes you leap through hoops. However, I'm
getting this message about hitting Control+C to ***really reboot the server***
whenever a file-save occurs, and I've seen it before. It's from the moment you
put an server-side event endpoint (SSE) in your app. Apparently, there's ***a
new thing running*** in a sufficiently different context (even though it's all
from the same `filename.py`) that task-killers can't kill it... at least not
easily.

And that's where watchdog comes in.

I really don't like doing this, because so far we've avoided the Pythonic but
ugly run-like-a-script directive:

```python
if __name__ == "__main__":
    main()
```

We budding FastHTML-jokeys are spoiled by being able to use the much more
pleasant to look at and unobjectionable:

```
serve()
```

...command. However, that's because the main-check is inside of it. It's not
like you ever get away from `if __name__ == "__main__":` in Python. You just
shove around where it's hidden. But in this case, we are not going to be using
the `serve()` convenience wrapper, for that's all that it is coming in with the
`from fasthtml.common import *` directive. It's using `uvicorn` in just such a
way as to suit Jeremy Howard's web framework preferences, and I've found that's
usually the right thing. However, we are about to drop an anvil on the
webserver's head, forcing a restart that cannot be resisted. And for that, we
huff and we puff and we use this friggin pattern:


from watchdog.events import FileSystemEventHandler
from watchdog.observers import Observer
